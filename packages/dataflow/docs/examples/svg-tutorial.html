<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Interactive SVG Tutorial - Dataflow Example</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="svg-tutorial.css">
</head>
<body>

<div class="site-header">
    <h1>Dataflow</h1>
    <a href="https://github.com/bodar/bodar.ts/tree/master/packages/dataflow"><img alt="GitHub" src="https://img.shields.io/badge/github-repo-blue?logo=github"></a>
</div>

<nav class="docs-nav">
    <a href="../index.html">Quick Start</a>
    <a href="../setup.html">Setup</a>
    <a href="../reactivity.html">Reactivity</a>
    <a href="../inputs.html">Inputs</a>
    <a href="../islands.html">Islands</a>
    <a href="./" class="active">Examples</a>
</nav>

<!-- Single import for the whole page -->
<script type="module" is="reactive">
    import {view, display} from "@bodar/dataflow/runtime.ts";
</script>

<h1>Interactive SVG Tutorial</h1>

<div class="intro">
    <p>Explore SVG elements interactively! Adjust the <strong>global controls</strong> to change viewBox, colors, and stroke properties - all examples update simultaneously.</p>
    <p><a href="https://github.com/bodar/bodar.ts/blob/master/packages/dataflow/docs/examples/svg-tutorial.html">View source on GitHub</a></p>
</div>

<div class="tutorial-layout">
<!-- Global Controls - Left Column -->
<aside class="global-controls">
    <h2>Global Controls</h2>
    <div class="control-group">
        <h3>viewBox</h3>
        <div class="control-row">
            <script type="module" is="reactive"><label>min-x {viewBoxMinX}</label></script>
            <script type="module" is="reactive">
                const viewBoxMinX = view(<input type="range" min="-100" max="100" value="0"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>min-y {viewBoxMinY}</label></script>
            <script type="module" is="reactive">
                const viewBoxMinY = view(<input type="range" min="-100" max="100" value="0"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>width {viewBoxWidth}</label></script>
            <script type="module" is="reactive">
                const viewBoxWidth = view(<input type="range" min="50" max="400" value="200"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>height {viewBoxHeight}</label></script>
            <script type="module" is="reactive">
                const viewBoxHeight = view(<input type="range" min="50" max="400" value="100"/>);
            </script>
        </div>
    </div>
    <div class="control-group">
        <h3>Colors</h3>
        <div class="control-row">
            <label>fill</label>
            <script type="module" is="reactive">
                const globalFill = view(<input type="color" value="#3b82f6"/>);
            </script>
        </div>
        <div class="control-row">
            <label>stroke</label>
            <script type="module" is="reactive">
                const globalStroke = view(<input type="color" value="#1e40af"/>);
            </script>
        </div>
    </div>
    <div class="control-group">
        <h3>Stroke</h3>
        <div class="control-row">
            <script type="module" is="reactive"><label>width {globalStrokeWidth}</label></script>
            <script type="module" is="reactive">
                const globalStrokeWidth = view(<input type="range" min="0" max="20" value="2"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>opacity {globalOpacity}</label></script>
            <script type="module" is="reactive">
                const globalOpacity = view(<input type="range" min="0" max="1" step="0.1" value="1"/>);
            </script>
        </div>
    </div>
</aside>

<!-- Main Content - Right Column -->
<main class="main-content">

<!-- Rect Section -->
<section class="element-section">
    <h2>&lt;rect&gt;</h2>
    <p>A rectangle defined by position (<code>x</code>, <code>y</code>), dimensions (<code>width</code>, <code>height</code>), and optional corner radius (<code>rx</code>, <code>ry</code>).</p>

    <script type="module" is="reactive">
        <div class="svg-preview">
            <svg viewBox={`${viewBoxMinX} ${viewBoxMinY} ${viewBoxWidth} ${viewBoxHeight}`}>
                <rect
                    x={rectX}
                    y={rectY}
                    width={rectWidth}
                    height={rectHeight}
                    rx={rectRx}
                    fill={globalFill}
                    stroke={globalStroke}
                    strokeWidth={globalStrokeWidth}
                    opacity={globalOpacity}
                />
            </svg>
        </div>
    </script>

    <div class="controls-grid">
        <div class="control-row">
            <script type="module" is="reactive"><label>x {rectX}</label></script>
            <script type="module" is="reactive">
                const rectX = view(<input type="range" min="0" max="150" value="20"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>y {rectY}</label></script>
            <script type="module" is="reactive">
                const rectY = view(<input type="range" min="0" max="80" value="10"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>width {rectWidth}</label></script>
            <script type="module" is="reactive">
                const rectWidth = view(<input type="range" min="10" max="180" value="80"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>height {rectHeight}</label></script>
            <script type="module" is="reactive">
                const rectHeight = view(<input type="range" min="10" max="90" value="50"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>rx {rectRx}</label></script>
            <script type="module" is="reactive">
                const rectRx = view(<input type="range" min="0" max="50" value="0"/>);
            </script>
        </div>
    </div>
</section>

<!-- Circle Section -->
<section class="element-section">
    <h2>&lt;circle&gt;</h2>
    <p>A circle defined by center position (<code>cx</code>, <code>cy</code>) and radius (<code>r</code>).</p>

    <script type="module" is="reactive">
        <div class="svg-preview">
            <svg viewBox={`${viewBoxMinX} ${viewBoxMinY} ${viewBoxWidth} ${viewBoxHeight}`}>
                <circle
                    cx={circleX}
                    cy={circleY}
                    r={circleR}
                    fill={globalFill}
                    stroke={globalStroke}
                    strokeWidth={globalStrokeWidth}
                    opacity={globalOpacity}
                />
            </svg>
        </div>
    </script>

    <div class="controls-grid">
        <div class="control-row">
            <script type="module" is="reactive"><label>cx {circleX}</label></script>
            <script type="module" is="reactive">
                const circleX = view(<input type="range" min="0" max="200" value="100"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>cy {circleY}</label></script>
            <script type="module" is="reactive">
                const circleY = view(<input type="range" min="0" max="100" value="50"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>r {circleR}</label></script>
            <script type="module" is="reactive">
                const circleR = view(<input type="range" min="5" max="50" value="35"/>);
            </script>
        </div>
    </div>
</section>

<!-- Ellipse Section -->
<section class="element-section">
    <h2>&lt;ellipse&gt;</h2>
    <p>An ellipse defined by center (<code>cx</code>, <code>cy</code>) and two radii (<code>rx</code>, <code>ry</code>) for horizontal and vertical axes.</p>

    <script type="module" is="reactive">
        <div class="svg-preview">
            <svg viewBox={`${viewBoxMinX} ${viewBoxMinY} ${viewBoxWidth} ${viewBoxHeight}`}>
                <ellipse
                    cx={ellipseX}
                    cy={ellipseY}
                    rx={ellipseRx}
                    ry={ellipseRy}
                    fill={globalFill}
                    stroke={globalStroke}
                    strokeWidth={globalStrokeWidth}
                    opacity={globalOpacity}
                />
            </svg>
        </div>
    </script>

    <div class="controls-grid">
        <div class="control-row">
            <script type="module" is="reactive"><label>cx {ellipseX}</label></script>
            <script type="module" is="reactive">
                const ellipseX = view(<input type="range" min="0" max="200" value="100"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>cy {ellipseY}</label></script>
            <script type="module" is="reactive">
                const ellipseY = view(<input type="range" min="0" max="100" value="50"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>rx {ellipseRx}</label></script>
            <script type="module" is="reactive">
                const ellipseRx = view(<input type="range" min="5" max="100" value="60"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>ry {ellipseRy}</label></script>
            <script type="module" is="reactive">
                const ellipseRy = view(<input type="range" min="5" max="50" value="30"/>);
            </script>
        </div>
    </div>
</section>

<!-- Line Section -->
<section class="element-section">
    <h2>&lt;line&gt;</h2>
    <p>A line from point (<code>x1</code>, <code>y1</code>) to point (<code>x2</code>, <code>y2</code>). Lines have no fill, only stroke.</p>

    <script type="module" is="reactive">
        <div class="svg-preview">
            <svg viewBox={`${viewBoxMinX} ${viewBoxMinY} ${viewBoxWidth} ${viewBoxHeight}`}>
                <line
                    x1={lineX1}
                    y1={lineY1}
                    x2={lineX2}
                    y2={lineY2}
                    stroke={globalStroke}
                    strokeWidth={globalStrokeWidth}
                    strokeLinecap={lineCap}
                    opacity={globalOpacity}
                />
            </svg>
        </div>
    </script>

    <div class="controls-grid">
        <div class="control-row">
            <script type="module" is="reactive"><label>x1 {lineX1}</label></script>
            <script type="module" is="reactive">
                const lineX1 = view(<input type="range" min="0" max="200" value="20"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>y1 {lineY1}</label></script>
            <script type="module" is="reactive">
                const lineY1 = view(<input type="range" min="0" max="100" value="10"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>x2 {lineX2}</label></script>
            <script type="module" is="reactive">
                const lineX2 = view(<input type="range" min="0" max="200" value="180"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>y2 {lineY2}</label></script>
            <script type="module" is="reactive">
                const lineY2 = view(<input type="range" min="0" max="100" value="90"/>);
            </script>
        </div>
        <div class="control-row">
            <label>linecap</label>
            <script type="module" is="reactive">
                const lineCap = view(<select>
                    <option value="butt">butt</option>
                    <option value="round">round</option>
                    <option value="square">square</option>
                </select>);
            </script>
        </div>
    </div>
</section>

<!-- Polyline Section -->
<section class="element-section">
    <h2>&lt;polyline&gt;</h2>
    <p>Connected line segments defined by a <code>points</code> attribute. Polylines are open (not auto-closed) and typically show stroke only.</p>

    <script type="module" is="reactive">
        <div class="svg-preview">
            <svg viewBox={`${viewBoxMinX} ${viewBoxMinY} ${viewBoxWidth} ${viewBoxHeight}`}>
                <polyline
                    points={polyPoints}
                    fill="none"
                    stroke={globalStroke}
                    strokeWidth={globalStrokeWidth}
                    strokeLinejoin={lineJoin}
                    opacity={globalOpacity}
                />
            </svg>
        </div>
    </script>

    <div class="controls-grid">
        <div class="control-row" style="grid-column: 1 / -1">
            <label>points</label>
            <script type="module" is="reactive">
                const polyPoints = view(<input type="text" value="20,90 60,30 100,60 140,20 180,50" style="flex: 1"/>);
            </script>
        </div>
        <div class="control-row">
            <label>linejoin</label>
            <script type="module" is="reactive">
                const lineJoin = view(<select>
                    <option value="miter">miter</option>
                    <option value="round">round</option>
                    <option value="bevel">bevel</option>
                </select>);
            </script>
        </div>
    </div>
</section>

<!-- Polygon Section -->
<section class="element-section">
    <h2>&lt;polygon&gt;</h2>
    <p>Like polyline but auto-closes, connecting the last point back to the first. Fill is visible since the shape is closed.</p>

    <script type="module" is="reactive">
        <div class="svg-preview">
            <svg viewBox={`${viewBoxMinX} ${viewBoxMinY} ${viewBoxWidth} ${viewBoxHeight}`}>
                <polygon
                    points={polygonPoints}
                    fill={globalFill}
                    stroke={globalStroke}
                    strokeWidth={globalStrokeWidth}
                    strokeLinejoin={lineJoin}
                    opacity={globalOpacity}
                />
            </svg>
        </div>
    </script>

    <div class="controls-grid">
        <div class="control-row" style="grid-column: 1 / -1">
            <label>points</label>
            <script type="module" is="reactive">
                const polygonPoints = view(<input type="text" value="100,5 143,36 126,86 74,86 57,36" style="flex: 1"/>);
            </script>
        </div>
    </div>
</section>

<!-- Transforms Section -->
<section class="element-section">
    <h2>Transforms</h2>
    <p>The <code>transform</code> attribute can translate, rotate, and scale elements. Multiple transforms are combined.</p>

    <script type="module" is="reactive">
        const transform = `translate(${translateX}, ${translateY}) rotate(${rotate}, 100, 50) scale(${scaleX}, ${scaleY})`;
    </script>
    <script type="module" is="reactive">
        <div class="svg-preview">
            <svg viewBox={`${viewBoxMinX} ${viewBoxMinY} ${viewBoxWidth} ${viewBoxHeight}`}>
                <line x1="100" y1="0" x2="100" y2="100" stroke="#ddd" strokeWidth="1"/>
                <line x1="0" y1="50" x2="200" y2="50" stroke="#ddd" strokeWidth="1"/>
                <rect
                    x="70"
                    y="20"
                    width="60"
                    height="60"
                    fill={globalFill}
                    stroke={globalStroke}
                    strokeWidth={globalStrokeWidth}
                    opacity={globalOpacity}
                    transform={transform}
                />
            </svg>
        </div>
    </script>

    <div class="controls-grid">
        <div class="control-row">
            <script type="module" is="reactive"><label>translateX {translateX}</label></script>
            <script type="module" is="reactive">
                const translateX = view(<input type="range" min="-100" max="100" value="0"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>translateY {translateY}</label></script>
            <script type="module" is="reactive">
                const translateY = view(<input type="range" min="-100" max="100" value="0"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>rotate {rotate}</label></script>
            <script type="module" is="reactive">
                const rotate = view(<input type="range" min="0" max="360" value="0"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>scaleX {scaleX}</label></script>
            <script type="module" is="reactive">
                const scaleX = view(<input type="range" min="0.1" max="2" step="0.1" value="1"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>scaleY {scaleY}</label></script>
            <script type="module" is="reactive">
                const scaleY = view(<input type="range" min="0.1" max="2" step="0.1" value="1"/>);
            </script>
        </div>
    </div>
</section>

<!-- textPath Section -->
<section class="element-section">
    <h2>&lt;textPath&gt;</h2>
    <p>Text that flows along a <code>&lt;path&gt;</code>. The <code>startOffset</code> controls where text begins on the path.</p>

    <script type="module" is="reactive">
        <div class="svg-preview">
            <svg viewBox={`${viewBoxMinX} ${viewBoxMinY} ${viewBoxWidth} ${viewBoxHeight}`}>
                <defs>
                    <path id="textCurve" d={`M 10,${curveY} Q 100,${curveY - curveHeight} 190,${curveY}`} fill="none"/>
                </defs>
                <path d={`M 10,${curveY} Q 100,${curveY - curveHeight} 190,${curveY}`}
                      fill="none" stroke="#ddd" strokeWidth="1"/>
                <text fill={globalFill} fontSize={textSize} opacity={globalOpacity}>
                    <textPath href="#textCurve" startOffset={`${textOffset}%`}>
                        {textContent}
                    </textPath>
                </text>
            </svg>
        </div>
    </script>

    <div class="controls-grid">
        <div class="control-row">
            <script type="module" is="reactive"><label>startOffset {textOffset}%</label></script>
            <script type="module" is="reactive">
                const textOffset = view(<input type="range" min="0" max="100" value="0"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>fontSize {textSize}</label></script>
            <script type="module" is="reactive">
                const textSize = view(<input type="range" min="8" max="24" value="14"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>curve {curveHeight}</label></script>
            <script type="module" is="reactive">
                const curveHeight = view(<input type="range" min="0" max="60" value="30"/>);
            </script>
        </div>
        <div class="control-row">
            <script type="module" is="reactive"><label>y {curveY}</label></script>
            <script type="module" is="reactive">
                const curveY = view(<input type="range" min="20" max="80" value="60"/>);
            </script>
        </div>
        <div class="control-row" style="grid-column: 1 / -1">
            <label>text</label>
            <script type="module" is="reactive">
                const textContent = view(<input type="text" value="Text flows along a path!" style="flex: 1"/>);
            </script>
        </div>
    </div>
</section>

</main>
</div>

</body>
</html>
